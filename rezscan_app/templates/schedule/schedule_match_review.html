{% extends 'layout.html' %}
{% block title %}Schedule Match Review - RezScan{% endblock %}

{% block content %}
<div class="container mt-4">
  <h2 class="mb-4">üìù Schedule Match Review</h2>

  {% if matches %}
    <div class="table-responsive">
      <table class="table table-bordered table-striped">
        <thead class="table-light">
          <tr>
            <th>Block Title</th>
            <th>Scheduled Time</th>
            <th>Matched Name</th>
            <th>MDOC</th>
            <th>Housing Unit</th>
            <th>Original Entry</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for m in matches %}
          <tr>
            <td>{{ m.block_title }}</td>
            <td>{{ m.block_time or 'N/A' }}</td>
            <td>{{ m.suggested_name or 'Unresolved' }}</td>
            <td>{{ m.suggested_mdoc or 'N/A' }}</td>
            <td>{{ m.suggested_housing or 'N/A' }}</td>
            <td>{{ m.source_line }}</td>
            <td class="text-center">
              <form method="POST" action="{{ url_for('schedule_review.approve_match', match_id=m.id) }}" style="display:inline-block">
                <button class="btn btn-sm btn-success" title="Approve"><i class="bi bi-check-circle"></i></button>
              </form>
              <form method="POST" action="{{ url_for('schedule_review.delete_match', match_id=m.id) }}" style="display:inline-block" onsubmit="return confirm('Are you sure you want to delete this match?');">
                <button class="btn btn-sm btn-danger" title="Delete"><i class="bi bi-x-circle"></i></button>
              </form>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% else %}
    <div class="alert alert-info">There are currently no pending schedule matches to review.</div>
  {% endif %}
</div>
{% endblock %}
